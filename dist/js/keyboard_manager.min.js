function eventPreventDefault(a){if(a.cancelable){if(!a.defaultPrevented){a.preventDefault()}}}function KeyboardManager(){this.events={};this.start={};this.timer={};this.end={};this.listen()}KeyboardManager.prototype.on=function(a,b){if(!this.events[a]){this.events[a]=[]}this.events[a].push(b)};KeyboardManager.prototype.emit=function(b,c){var a=this.events[b];if(a){a.forEach(function(d){d(c)})}};KeyboardManager.prototype.listen=function(){var a=document.getElementById("container");var b=this;var c={37:0,38:1,39:2,40:3,65:0,87:1,68:2,83:3};document.addEventListener("keydown",function(f){var d=f.altKey||f.shiftKey||f.ctrlKey||f.metaKey;var e=c[f.keyCode];if(!d&&e!==undefined){eventPreventDefault(f);b.emit("move",e)}});a.addEventListener("touchstart",function(d){b.start.x=d.touches[0].clientX;b.start.y=d.touches[0].clientY;eventPreventDefault(d)});a.addEventListener("touchmove",function(d){eventPreventDefault(d)});a.addEventListener("touchend",function(f){b.end.x=f.changedTouches[0].clientX;b.end.y=f.changedTouches[0].clientY;var g=parseInt(b.start.y-b.end.y);var e=parseInt(b.end.x-b.start.x);if(e!==0){var d=g/e;if((e<0&&g<0&&d<1)||(e<0&&g>0&&d>-1)){b.emit("touch",0)}if((e>0&&g<0&&d>-1)||(e>0&&g>0&&d<1)){b.emit("touch",2)}if((e<0&&g>0&&d<-1)||(e>0&&g>0&&d>1)){b.emit("touch",1)}if((e<0&&g<0&&d>1)||(e>0&&g<0&&d<-1)){b.emit("touch",3)}}else{if(g<0){b.emit("touch",1)}if(g>0){b.emit("touch",3)}}eventPreventDefault(f)})};